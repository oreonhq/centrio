#!/usr/bin/env python3
"""
Generate and compile gettext .po files for all installer languages.
Run from repo root: python3 scripts/update_locales.py
"""
import os
import subprocess
from pathlib import Path

REPO_ROOT = Path(__file__).resolve().parents[1]
LOCALE_DIR = REPO_ROOT / "locale"

# All msgids used in the installer (welcome + dialogs)
MSGIDS = [
    "Welcome to {}",
    "Set up your new operating system in a few simple steps.",
    "Language",
    "Installer Language",
    "Installation Overview",
    "Operating System",
    "Installation Type",
    "Full desktop with applications",
    "Estimated Time",
    "15-30 minutes",
    "Click Next to begin configuration.",
    "Language Changed",
    "The language has been changed. Please restart the installer to see the changes.",
    "Language Selected",
    "The installer will restart to apply the new language.",
]

# locale_code -> (Language name, {msgid: msgstr})
TRANSLATIONS = {
    "es_ES": ("Spanish", {
        "Welcome to {}": "Bienvenido a {}",
        "Set up your new operating system in a few simple steps.": "Configure su nuevo sistema operativo en unos pocos pasos simples.",
        "Language": "Idioma",
        "Installer Language": "Idioma del Instalador",
        "Installation Overview": "Resumen de la Instalación",
        "Operating System": "Sistema Operativo",
        "Installation Type": "Tipo de Instalación",
        "Full desktop with applications": "Escritorio completo con aplicaciones",
        "Estimated Time": "Tiempo Estimado",
        "15-30 minutes": "15-30 minutos",
        "Click Next to begin configuration.": "Haga clic en Siguiente para comenzar la configuración.",
        "Language Changed": "Idioma Cambiado",
        "The language has been changed. Please restart the installer to see the changes.": "El idioma ha sido cambiado. Por favor reinicie el instalador para ver los cambios.",
        "Language Selected": "Idioma Seleccionado",
        "The installer will restart to apply the new language.": "El instalador se reiniciará para aplicar el nuevo idioma.",
    }),
    "fr_FR": ("French", {
        "Welcome to {}": "Bienvenue sur {}",
        "Set up your new operating system in a few simple steps.": "Configurez votre nouveau système en quelques étapes simples.",
        "Language": "Langue",
        "Installer Language": "Langue de l'installateur",
        "Installation Overview": "Aperçu de l'installation",
        "Operating System": "Système d'exploitation",
        "Installation Type": "Type d'installation",
        "Full desktop with applications": "Bureau complet avec applications",
        "Estimated Time": "Temps estimé",
        "15-30 minutes": "15-30 minutes",
        "Click Next to begin configuration.": "Cliquez sur Suivant pour commencer la configuration.",
        "Language Changed": "Langue modifiée",
        "The language has been changed. Please restart the installer to see the changes.": "La langue a été modifiée. Redémarrez l'installateur pour voir les changements.",
        "Language Selected": "Langue sélectionnée",
        "The installer will restart to apply the new language.": "L'installateur va redémarrer pour appliquer la nouvelle langue.",
    }),
    "de_DE": ("German", {
        "Welcome to {}": "Willkommen bei {}",
        "Set up your new operating system in a few simple steps.": "Richten Sie Ihr neues Betriebssystem in wenigen Schritten ein.",
        "Language": "Sprache",
        "Installer Language": "Installationssprache",
        "Installation Overview": "Installationsübersicht",
        "Operating System": "Betriebssystem",
        "Installation Type": "Installationstyp",
        "Full desktop with applications": "Vollständiger Desktop mit Anwendungen",
        "Estimated Time": "Geschätzte Dauer",
        "15-30 minutes": "15-30 Minuten",
        "Click Next to begin configuration.": "Klicken Sie auf Weiter, um die Konfiguration zu starten.",
        "Language Changed": "Sprache geändert",
        "The language has been changed. Please restart the installer to see the changes.": "Die Sprache wurde geändert. Bitte starten Sie den Installer neu.",
        "Language Selected": "Sprache ausgewählt",
        "The installer will restart to apply the new language.": "Der Installer wird neu gestartet, um die neue Sprache zu übernehmen.",
    }),
    "it_IT": ("Italian", {
        "Welcome to {}": "Benvenuto in {}",
        "Set up your new operating system in a few simple steps.": "Configura il tuo nuovo sistema operativo in pochi semplici passaggi.",
        "Language": "Lingua",
        "Installer Language": "Lingua dell'installer",
        "Installation Overview": "Panoramica installazione",
        "Operating System": "Sistema operativo",
        "Installation Type": "Tipo di installazione",
        "Full desktop with applications": "Desktop completo con applicazioni",
        "Estimated Time": "Tempo stimato",
        "15-30 minutes": "15-30 minuti",
        "Click Next to begin configuration.": "Clicca Avanti per iniziare la configurazione.",
        "Language Changed": "Lingua modificata",
        "The language has been changed. Please restart the installer to see the changes.": "La lingua è stata modificata. Riavvia l'installer per vedere le modifiche.",
        "Language Selected": "Lingua selezionata",
        "The installer will restart to apply the new language.": "L'installer si riavvierà per applicare la nuova lingua.",
    }),
    "pt_BR": ("Portuguese (Brazil)", {
        "Welcome to {}": "Bem-vindo ao {}",
        "Set up your new operating system in a few simple steps.": "Configure seu novo sistema operacional em poucos passos.",
        "Language": "Idioma",
        "Installer Language": "Idioma do instalador",
        "Installation Overview": "Visão geral da instalação",
        "Operating System": "Sistema operacional",
        "Installation Type": "Tipo de instalação",
        "Full desktop with applications": "Desktop completo com aplicativos",
        "Estimated Time": "Tempo estimado",
        "15-30 minutes": "15-30 minutos",
        "Click Next to begin configuration.": "Clique em Próximo para começar a configuração.",
        "Language Changed": "Idioma alterado",
        "The language has been changed. Please restart the installer to see the changes.": "O idioma foi alterado. Reinicie o instalador para ver as alterações.",
        "Language Selected": "Idioma selecionado",
        "The installer will restart to apply the new language.": "O instalador será reiniciado para aplicar o novo idioma.",
    }),
    "pt_PT": ("Portuguese (Portugal)", {
        "Welcome to {}": "Bem-vindo ao {}",
        "Set up your new operating system in a few simple steps.": "Configure o seu novo sistema operativo em poucos passos.",
        "Language": "Idioma",
        "Installer Language": "Idioma do instalador",
        "Installation Overview": "Resumo da instalação",
        "Operating System": "Sistema operativo",
        "Installation Type": "Tipo de instalação",
        "Full desktop with applications": "Ambiente completo com aplicações",
        "Estimated Time": "Tempo estimado",
        "15-30 minutes": "15-30 minutos",
        "Click Next to begin configuration.": "Clique em Seguinte para começar a configuração.",
        "Language Changed": "Idioma alterado",
        "The language has been changed. Please restart the installer to see the changes.": "O idioma foi alterado. Reinicie o instalador para ver as alterações.",
        "Language Selected": "Idioma seleccionado",
        "The installer will restart to apply the new language.": "O instalador será reiniciado para aplicar o novo idioma.",
    }),
    "ru_RU": ("Russian", {
        "Welcome to {}": "Добро пожаловать в {}",
        "Set up your new operating system in a few simple steps.": "Настройте новую операционную систему за несколько простых шагов.",
        "Language": "Язык",
        "Installer Language": "Язык установщика",
        "Installation Overview": "Обзор установки",
        "Operating System": "Операционная система",
        "Installation Type": "Тип установки",
        "Full desktop with applications": "Полный рабочий стол с приложениями",
        "Estimated Time": "Примерное время",
        "15-30 minutes": "15-30 минут",
        "Click Next to begin configuration.": "Нажмите «Далее», чтобы начать настройку.",
        "Language Changed": "Язык изменён",
        "The language has been changed. Please restart the installer to see the changes.": "Язык изменён. Перезапустите установщик.",
        "Language Selected": "Язык выбран",
        "The installer will restart to apply the new language.": "Установщик перезапустится для применения нового языка.",
    }),
    "zh_CN": ("Chinese (Simplified)", {
        "Welcome to {}": "欢迎使用 {}",
        "Set up your new operating system in a few simple steps.": "通过几个简单步骤设置您的新操作系统。",
        "Language": "语言",
        "Installer Language": "安装程序语言",
        "Installation Overview": "安装概览",
        "Operating System": "操作系统",
        "Installation Type": "安装类型",
        "Full desktop with applications": "带应用程序的完整桌面",
        "Estimated Time": "预计时间",
        "15-30 minutes": "15-30 分钟",
        "Click Next to begin configuration.": "点击“下一步”开始配置。",
        "Language Changed": "语言已更改",
        "The language has been changed. Please restart the installer to see the changes.": "语言已更改。请重新启动安装程序以查看更改。",
        "Language Selected": "已选择语言",
        "The installer will restart to apply the new language.": "安装程序将重新启动以应用新语言。",
    }),
    "zh_TW": ("Chinese (Traditional)", {
        "Welcome to {}": "歡迎使用 {}",
        "Set up your new operating system in a few simple steps.": "透過幾個簡單步驟設定您的新作業系統。",
        "Language": "語言",
        "Installer Language": "安裝程式語言",
        "Installation Overview": "安裝概覽",
        "Operating System": "作業系統",
        "Installation Type": "安裝類型",
        "Full desktop with applications": "含應用程式的完整桌面",
        "Estimated Time": "預估時間",
        "15-30 minutes": "15-30 分鐘",
        "Click Next to begin configuration.": "按「下一步」開始設定。",
        "Language Changed": "語言已變更",
        "The language has been changed. Please restart the installer to see the changes.": "語言已變更。請重新啟動安裝程式以查看變更。",
        "Language Selected": "已選擇語言",
        "The installer will restart to apply the new language.": "安裝程式將重新啟動以套用新語言。",
    }),
    "ja_JP": ("Japanese", {
        "Welcome to {}": "{} へようこそ",
        "Set up your new operating system in a few simple steps.": "簡単な手順で新しいオペレーティングシステムをセットアップします。",
        "Language": "言語",
        "Installer Language": "インストーラの言語",
        "Installation Overview": "インストール概要",
        "Operating System": "オペレーティングシステム",
        "Installation Type": "インストールタイプ",
        "Full desktop with applications": "アプリケーション付きフルデスクトップ",
        "Estimated Time": "所要時間の目安",
        "15-30 minutes": "15〜30 分",
        "Click Next to begin configuration.": "「次へ」をクリックして設定を開始します。",
        "Language Changed": "言語を変更しました",
        "The language has been changed. Please restart the installer to see the changes.": "言語が変更されました。変更を反映するにはインストーラを再起動してください。",
        "Language Selected": "言語を選択しました",
        "The installer will restart to apply the new language.": "新しい言語を適用するため、インストーラを再起動します。",
    }),
    "ko_KR": ("Korean", {
        "Welcome to {}": "{}에 오신 것을 환영합니다",
        "Set up your new operating system in a few simple steps.": "몇 가지 간단한 단계로 새 운영 체제를 설정하세요.",
        "Language": "언어",
        "Installer Language": "설치 프로그램 언어",
        "Installation Overview": "설치 개요",
        "Operating System": "운영 체제",
        "Installation Type": "설치 유형",
        "Full desktop with applications": "애플리케이션이 포함된 전체 데스크톱",
        "Estimated Time": "예상 시간",
        "15-30 minutes": "15-30분",
        "Click Next to begin configuration.": "다음을 클릭하여 구성을 시작하세요.",
        "Language Changed": "언어가 변경됨",
        "The language has been changed. Please restart the installer to see the changes.": "언어가 변경되었습니다. 변경 사항을 보려면 설치 프로그램을 다시 시작하세요.",
        "Language Selected": "언어 선택됨",
        "The installer will restart to apply the new language.": "새 언어를 적용하기 위해 설치 프로그램이 다시 시작됩니다.",
    }),
    "ar_SA": ("Arabic", {
        "Welcome to {}": "مرحباً بك في {}",
        "Set up your new operating system in a few simple steps.": "قم بإعداد نظام التشغيل الجديد في خطوات بسيطة.",
        "Language": "اللغة",
        "Installer Language": "لغة المثبت",
        "Installation Overview": "نظرة عامة على التثبيت",
        "Operating System": "نظام التشغيل",
        "Installation Type": "نوع التثبيت",
        "Full desktop with applications": "سطح مكتب كامل مع التطبيقات",
        "Estimated Time": "الوقت المقدر",
        "15-30 minutes": "15-30 دقيقة",
        "Click Next to begin configuration.": "انقر على التالي لبدء الإعداد.",
        "Language Changed": "تم تغيير اللغة",
        "The language has been changed. Please restart the installer to see the changes.": "تم تغيير اللغة. يرجى إعادة تشغيل المثبت لرؤية التغييرات.",
        "Language Selected": "تم اختيار اللغة",
        "The installer will restart to apply the new language.": "سيتم إعادة تشغيل المثبت لتطبيق اللغة الجديدة.",
    }),
    "hi_IN": ("Hindi", {
        "Welcome to {}": "{} में आपका स्वागत है",
        "Set up your new operating system in a few simple steps.": "कुछ सरल चरणों में अपने नए ऑपरेटिंग सिस्टम को सेट अप करें।",
        "Language": "भाषा",
        "Installer Language": "इंस्टॉलर भाषा",
        "Installation Overview": "इंस्टॉलेशन अवलोकन",
        "Operating System": "ऑपरेटिंग सिस्टम",
        "Installation Type": "इंस्टॉलेशन प्रकार",
        "Full desktop with applications": "एप्लिकेशन के साथ पूर्ण डेस्कटॉप",
        "Estimated Time": "अनुमानित समय",
        "15-30 minutes": "15-30 मिनट",
        "Click Next to begin configuration.": "कॉन्फ़िगरेशन शुरू करने के लिए अगला क्लिक करें।",
        "Language Changed": "भाषा बदली गई",
        "The language has been changed. Please restart the installer to see the changes.": "भाषा बदल दी गई है। बदलाव देखने के लिए इंस्टॉलर को पुनः आरंभ करें।",
        "Language Selected": "भाषा चुनी गई",
        "The installer will restart to apply the new language.": "नई भाषा लागू करने के लिए इंस्टॉलर पुनः आरंभ होगा।",
    }),
    "th_TH": ("Thai", {
        "Welcome to {}": "ยินดีต้อนรับสู่ {}",
        "Set up your new operating system in a few simple steps.": "ตั้งค่าระบบปฏิบัติการใหม่ในไม่กี่ขั้นตอน",
        "Language": "ภาษา",
        "Installer Language": "ภาษาของตัวติดตั้ง",
        "Installation Overview": "ภาพรวมการติดตั้ง",
        "Operating System": "ระบบปฏิบัติการ",
        "Installation Type": "ประเภทการติดตั้ง",
        "Full desktop with applications": "เดสก์ท็อปเต็มรูปแบบพร้อมแอปพลิเคชัน",
        "Estimated Time": "เวลาโดยประมาณ",
        "15-30 minutes": "15-30 นาที",
        "Click Next to begin configuration.": "คลิก ถัดไป เพื่อเริ่มการกำหนดค่า",
        "Language Changed": "เปลี่ยนภาษาแล้ว",
        "The language has been changed. Please restart the installer to see the changes.": "ภาษาได้ถูกเปลี่ยนแล้ว กรุณาเริ่มตัวติดตั้งใหม่เพื่อดูการเปลี่ยนแปลง",
        "Language Selected": "เลือกภาษาแล้ว",
        "The installer will restart to apply the new language.": "ตัวติดตั้งจะเริ่มใหม่เพื่อใช้ภาษาใหม่",
    }),
    "tr_TR": ("Turkish", {
        "Welcome to {}": "{} hoş geldiniz",
        "Set up your new operating system in a few simple steps.": "Yeni işletim sisteminizi birkaç basit adımda kurun.",
        "Language": "Dil",
        "Installer Language": "Yükleyici dili",
        "Installation Overview": "Kurulum özeti",
        "Operating System": "İşletim sistemi",
        "Installation Type": "Kurulum türü",
        "Full desktop with applications": "Uygulamalı tam masaüstü",
        "Estimated Time": "Tahmini süre",
        "15-30 minutes": "15-30 dakika",
        "Click Next to begin configuration.": "Yapılandırmaya başlamak için İleri'ye tıklayın.",
        "Language Changed": "Dil değiştirildi",
        "The language has been changed. Please restart the installer to see the changes.": "Dil değiştirildi. Değişiklikleri görmek için yükleyiciyi yeniden başlatın.",
        "Language Selected": "Dil seçildi",
        "The installer will restart to apply the new language.": "Yeni dili uygulamak için yükleyici yeniden başlatılacak.",
    }),
    "pl_PL": ("Polish", {
        "Welcome to {}": "Witamy w {}",
        "Set up your new operating system in a few simple steps.": "Skonfiguruj nowy system operacyjny w kilku krokach.",
        "Language": "Język",
        "Installer Language": "Język instalatora",
        "Installation Overview": "Przegląd instalacji",
        "Operating System": "System operacyjny",
        "Installation Type": "Typ instalacji",
        "Full desktop with applications": "Pełny pulpit z aplikacjami",
        "Estimated Time": "Szacowany czas",
        "15-30 minutes": "15-30 minut",
        "Click Next to begin configuration.": "Kliknij Dalej, aby rozpocząć konfigurację.",
        "Language Changed": "Język zmieniony",
        "The language has been changed. Please restart the installer to see the changes.": "Język został zmieniony. Uruchom ponownie instalator.",
        "Language Selected": "Język wybrany",
        "The installer will restart to apply the new language.": "Instalator zostanie uruchomiony ponownie, aby zastosować nowy język.",
    }),
    "nl_NL": ("Dutch", {
        "Welcome to {}": "Welkom bij {}",
        "Set up your new operating system in a few simple steps.": "Stel uw nieuwe besturingssysteem in een paar stappen in.",
        "Language": "Taal",
        "Installer Language": "Installatietaal",
        "Installation Overview": "Installatieoverzicht",
        "Operating System": "Besturingssysteem",
        "Installation Type": "Installatietype",
        "Full desktop with applications": "Volledig bureaublad met toepassingen",
        "Estimated Time": "Geschatte tijd",
        "15-30 minutes": "15-30 minuten",
        "Click Next to begin configuration.": "Klik op Volgende om te beginnen met configureren.",
        "Language Changed": "Taal gewijzigd",
        "The language has been changed. Please restart the installer to see the changes.": "De taal is gewijzigd. Herstart de installer om de wijzigingen te zien.",
        "Language Selected": "Taal geselecteerd",
        "The installer will restart to apply the new language.": "De installer wordt herstart om de nieuwe taal toe te passen.",
    }),
    "sv_SE": ("Swedish", {
        "Welcome to {}": "Välkommen till {}",
        "Set up your new operating system in a few simple steps.": "Konfigurera ditt nya operativsystem i några enkla steg.",
        "Language": "Språk",
        "Installer Language": "Installationsspråk",
        "Installation Overview": "Installationsöversikt",
        "Operating System": "Operativsystem",
        "Installation Type": "Installationstyp",
        "Full desktop with applications": "Full skrivbordsmiljö med program",
        "Estimated Time": "Uppskattad tid",
        "15-30 minutes": "15-30 minuter",
        "Click Next to begin configuration.": "Klicka på Nästa för att börja konfigurera.",
        "Language Changed": "Språk ändrat",
        "The language has been changed. Please restart the installer to see the changes.": "Språket har ändrats. Starta om installationsprogrammet.",
        "Language Selected": "Språk valt",
        "The installer will restart to apply the new language.": "Installationsprogrammet startas om för att tillämpa det nya språket.",
    }),
    "no_NO": ("Norwegian", {
        "Welcome to {}": "Velkommen til {}",
        "Set up your new operating system in a few simple steps.": "Sett opp det nye operativsystemet i noen få enkle trinn.",
        "Language": "Språk",
        "Installer Language": "Installeringsspråk",
        "Installation Overview": "Installasjonsoversikt",
        "Operating System": "Operativsystem",
        "Installation Type": "Installasjonstype",
        "Full desktop with applications": "Fullt skrivebord med programmer",
        "Estimated Time": "Estimert tid",
        "15-30 minutes": "15-30 minutter",
        "Click Next to begin configuration.": "Klikk Neste for å starte konfigurasjonen.",
        "Language Changed": "Språk endret",
        "The language has been changed. Please restart the installer to see the changes.": "Språket er endret. Start installasjonsprogrammet på nytt.",
        "Language Selected": "Språk valgt",
        "The installer will restart to apply the new language.": "Installasjonsprogrammet startes på nytt for å bruke det nye språket.",
    }),
    "da_DK": ("Danish", {
        "Welcome to {}": "Velkommen til {}",
        "Set up your new operating system in a few simple steps.": "Konfigurer dit nye styresystem i få simple trin.",
        "Language": "Sprog",
        "Installer Language": "Installeringssprog",
        "Installation Overview": "Installationsoversigt",
        "Operating System": "Styresystem",
        "Installation Type": "Installationstype",
        "Full desktop with applications": "Fuldt skrivebord med programmer",
        "Estimated Time": "Estimeret tid",
        "15-30 minutes": "15-30 minutter",
        "Click Next to begin configuration.": "Klik på Næste for at starte konfigurationen.",
        "Language Changed": "Sprog ændret",
        "The language has been changed. Please restart the installer to see the changes.": "Sproget er ændret. Genstart installationsprogrammet.",
        "Language Selected": "Sprog valgt",
        "The installer will restart to apply the new language.": "Installationsprogrammet genstartes for at anvende det nye sprog.",
    }),
    "fi_FI": ("Finnish", {
        "Welcome to {}": "Tervetuloa kohteeseen {}",
        "Set up your new operating system in a few simple steps.": "Asenna uusi käyttöjärjestelmä muutamassa yksinkertaisessa vaiheessa.",
        "Language": "Kieli",
        "Installer Language": "Asennusohjelman kieli",
        "Installation Overview": "Asennuksen yhteenveto",
        "Operating System": "Käyttöjärjestelmä",
        "Installation Type": "Asennustyyppi",
        "Full desktop with applications": "Täysi työpöytä sovelluksineen",
        "Estimated Time": "Arvioitu aika",
        "15-30 minutes": "15-30 minuuttia",
        "Click Next to begin configuration.": "Napsauta Seuraava aloittaaksesi määrityksen.",
        "Language Changed": "Kieli vaihdettu",
        "The language has been changed. Please restart the installer to see the changes.": "Kieli on vaihdettu. Käynnistä asennusohjelma uudelleen.",
        "Language Selected": "Kieli valittu",
        "The installer will restart to apply the new language.": "Asennusohjelma käynnistetään uudelleen uuden kielen käyttöönottoa varten.",
    }),
    "cs_CZ": ("Czech", {
        "Welcome to {}": "Vítejte v {}",
        "Set up your new operating system in a few simple steps.": "Nastavte si nový operační systém v několika jednoduchých krocích.",
        "Language": "Jazyk",
        "Installer Language": "Jazyk instalátoru",
        "Installation Overview": "Přehled instalace",
        "Operating System": "Operační systém",
        "Installation Type": "Typ instalace",
        "Full desktop with applications": "Plná plocha s aplikacemi",
        "Estimated Time": "Odhadovaný čas",
        "15-30 minutes": "15-30 minut",
        "Click Next to begin configuration.": "Klikněte na Další pro zahájení konfigurace.",
        "Language Changed": "Jazyk změněn",
        "The language has been changed. Please restart the installer to see the changes.": "Jazyk byl změněn. Restartujte instalátor.",
        "Language Selected": "Jazyk vybrán",
        "The installer will restart to apply the new language.": "Instalátor se restartuje pro použití nového jazyka.",
    }),
    "sk_SK": ("Slovak", {
        "Welcome to {}": "Vitajte v {}",
        "Set up your new operating system in a few simple steps.": "Nastavte si nový operačný systém v niekoľkých jednoduchých krokoch.",
        "Language": "Jazyk",
        "Installer Language": "Jazyk inštalátora",
        "Installation Overview": "Prehľad inštalácie",
        "Operating System": "Operačný systém",
        "Installation Type": "Typ inštalácie",
        "Full desktop with applications": "Plná pracovná plocha s aplikáciami",
        "Estimated Time": "Odhadovaný čas",
        "15-30 minutes": "15-30 minút",
        "Click Next to begin configuration.": "Kliknite na Ďalší pre začatie konfigurácie.",
        "Language Changed": "Jazyk zmenený",
        "The language has been changed. Please restart the installer to see the changes.": "Jazyk bol zmenený. Reštartujte inštalátor.",
        "Language Selected": "Jazyk vybratý",
        "The installer will restart to apply the new language.": "Inštalátor sa reštartuje pre použitie nového jazyka.",
    }),
    "hu_HU": ("Hungarian", {
        "Welcome to {}": "Üdvözöljük a {}",
        "Set up your new operating system in a few simple steps.": "Állítsa be új operációs rendszerét néhány egyszerű lépésben.",
        "Language": "Nyelv",
        "Installer Language": "Telepítő nyelve",
        "Installation Overview": "Telepítés áttekintése",
        "Operating System": "Operációs rendszer",
        "Installation Type": "Telepítés típusa",
        "Full desktop with applications": "Teljes asztali környezet alkalmazásokkal",
        "Estimated Time": "Becsült idő",
        "15-30 minutes": "15-30 perc",
        "Click Next to begin configuration.": "Kattintson a Tovább gombra a konfiguráció indításához.",
        "Language Changed": "Nyelv megváltoztatva",
        "The language has been changed. Please restart the installer to see the changes.": "A nyelv megváltozott. Indítsa újra a telepítőt.",
        "Language Selected": "Nyelv kiválasztva",
        "The installer will restart to apply the new language.": "A telepítő újraindul az új nyelv alkalmazásához.",
    }),
    "ro_RO": ("Romanian", {
        "Welcome to {}": "Bine ați venit la {}",
        "Set up your new operating system in a few simple steps.": "Configurați noul sistem de operare în câțiva pași simpli.",
        "Language": "Limbă",
        "Installer Language": "Limba instalatorului",
        "Installation Overview": "Prezentare generală instalare",
        "Operating System": "Sistem de operare",
        "Installation Type": "Tip instalare",
        "Full desktop with applications": "Desktop complet cu aplicații",
        "Estimated Time": "Timp estimat",
        "15-30 minutes": "15-30 minute",
        "Click Next to begin configuration.": "Faceți clic pe Next pentru a începe configurarea.",
        "Language Changed": "Limba a fost schimbată",
        "The language has been changed. Please restart the installer to see the changes.": "Limba a fost schimbată. Reporniți instalatorul.",
        "Language Selected": "Limba selectată",
        "The installer will restart to apply the new language.": "Instalatorul se va reporni pentru a aplica noua limbă.",
    }),
    "bg_BG": ("Bulgarian", {
        "Welcome to {}": "Добре дошли в {}",
        "Set up your new operating system in a few simple steps.": "Настройте новата си операционна система с няколко прости стъпки.",
        "Language": "Език",
        "Installer Language": "Език на инсталатора",
        "Installation Overview": "Обзор на инсталацията",
        "Operating System": "Операционна система",
        "Installation Type": "Тип инсталация",
        "Full desktop with applications": "Пълен работен плот с приложения",
        "Estimated Time": "Очаквано време",
        "15-30 minutes": "15-30 минути",
        "Click Next to begin configuration.": "Щракнете върху Напред за да започнете конфигурирането.",
        "Language Changed": "Езикът е променен",
        "The language has been changed. Please restart the installer to see the changes.": "Езикът е променен. Рестартирайте инсталатора.",
        "Language Selected": "Език избран",
        "The installer will restart to apply the new language.": "Инсталаторът ще се рестартира за да приложи новия език.",
    }),
    "hr_HR": ("Croatian", {
        "Welcome to {}": "Dobrodošli u {}",
        "Set up your new operating system in a few simple steps.": "Postavite novi operacijski sustav u nekoliko jednostavnih koraka.",
        "Language": "Jezik",
        "Installer Language": "Jezik instalacijskog programa",
        "Installation Overview": "Pregled instalacije",
        "Operating System": "Operacijski sustav",
        "Installation Type": "Vrsta instalacije",
        "Full desktop with applications": "Puna radna površina s aplikacijama",
        "Estimated Time": "Procijenjeno vrijeme",
        "15-30 minutes": "15-30 minuta",
        "Click Next to begin configuration.": "Kliknite Dalje za početak konfiguracije.",
        "Language Changed": "Jezik promijenjen",
        "The language has been changed. Please restart the installer to see the changes.": "Jezik je promijenjen. Ponovno pokrenite instalacijski program.",
        "Language Selected": "Jezik odabran",
        "The installer will restart to apply the new language.": "Instalacijski program će se ponovno pokrenuti za primjenu novog jezika.",
    }),
    "sl_SI": ("Slovenian", {
        "Welcome to {}": "Dobrodošli v {}",
        "Set up your new operating system in a few simple steps.": "Nastavite novi operacijski sistem v nekaj preprostih korakih.",
        "Language": "Jezik",
        "Installer Language": "Jezik namestitvenega programa",
        "Installation Overview": "Pregled namestitve",
        "Operating System": "Operacijski sistem",
        "Installation Type": "Vrsta namestitve",
        "Full desktop with applications": "Polna namizje z aplikacijami",
        "Estimated Time": "Ocenjeni čas",
        "15-30 minutes": "15-30 minut",
        "Click Next to begin configuration.": "Kliknite Naprej za začetek konfiguracije.",
        "Language Changed": "Jezik spremenjen",
        "The language has been changed. Please restart the installer to see the changes.": "Jezik je bil spremenjen. Znova zaženite namestitveni program.",
        "Language Selected": "Jezik izbran",
        "The installer will restart to apply the new language.": "Namestitveni program se bo znova zagnal za uporabo novega jezika.",
    }),
    "et_EE": ("Estonian", {
        "Welcome to {}": "Tere tulemast {}",
        "Set up your new operating system in a few simple steps.": "Seadista oma uus operatsioonisüsteem mõne lihtsa sammuga.",
        "Language": "Keel",
        "Installer Language": "Installeerija keel",
        "Installation Overview": "Paigalduse ülevaade",
        "Operating System": "Operatsioonisüsteem",
        "Installation Type": "Paigalduse tüüp",
        "Full desktop with applications": "Täielik töölaud rakendustega",
        "Estimated Time": "Hinnanguline aeg",
        "15-30 minutes": "15-30 minutit",
        "Click Next to begin configuration.": "Konfiguratsiooni alustamiseks klõpsake Edasi.",
        "Language Changed": "Keel muudetud",
        "The language has been changed. Please restart the installer to see the changes.": "Keel on muudetud. Taaskäivitage installeerija.",
        "Language Selected": "Keel valitud",
        "The installer will restart to apply the new language.": "Installeerija taaskäivitatakse uue keele rakendamiseks.",
    }),
    "lv_LV": ("Latvian", {
        "Welcome to {}": "Laipni lūdzam {}",
        "Set up your new operating system in a few simple steps.": "Iestatiet jauno operētājsistēmu dažos vienkāršos soļos.",
        "Language": "Valoda",
        "Installer Language": "Instalētāja valoda",
        "Installation Overview": "Instalēšanas pārskats",
        "Operating System": "Operētājsistēma",
        "Installation Type": "Instalēšanas veids",
        "Full desktop with applications": "Pilna darbvirsma ar lietotnēm",
        "Estimated Time": "Paredzētais laiks",
        "15-30 minutes": "15-30 minūtes",
        "Click Next to begin configuration.": "Noklikšķiniet Tālāk, lai sāktu konfigurāciju.",
        "Language Changed": "Valoda mainīta",
        "The language has been changed. Please restart the installer to see the changes.": "Valoda ir mainīta. Pārstartējiet instalētāju.",
        "Language Selected": "Valoda izvēlēta",
        "The installer will restart to apply the new language.": "Instalētājs tiks pārstartēts, lai lietotu jauno valodu.",
    }),
    "lt_LT": ("Lithuanian", {
        "Welcome to {}": "Sveiki atvykę į {}",
        "Set up your new operating system in a few simple steps.": "Nustatykite naują operacinę sistemą keliais paprastais žingsniais.",
        "Language": "Kalba",
        "Installer Language": "Diegiklio kalba",
        "Installation Overview": "Diegimo apžvalga",
        "Operating System": "Operacinė sistema",
        "Installation Type": "Diegimo tipas",
        "Full desktop with applications": "Pilna darbalaukis su programomis",
        "Estimated Time": "Numatytas laikas",
        "15-30 minutes": "15-30 minučių",
        "Click Next to begin configuration.": "Spustelėkite Toliau, kad pradėtumėte konfigūraciją.",
        "Language Changed": "Kalba pakeista",
        "The language has been changed. Please restart the installer to see the changes.": "Kalba pakeista. Perleiskite diegiklį.",
        "Language Selected": "Kalba pasirinkta",
        "The installer will restart to apply the new language.": "Diegiklis bus perleistas, kad pritaikytų naują kalbą.",
    }),
    "el_GR": ("Greek", {
        "Welcome to {}": "Καλώς ήρθατε στο {}",
        "Set up your new operating system in a few simple steps.": "Ρυθμίστε το νέο σας λειτουργικό σύστημα σε λίγα απλά βήματα.",
        "Language": "Γλώσσα",
        "Installer Language": "Γλώσσα εγκαταστάτη",
        "Installation Overview": "Επισκόπηση εγκατάστασης",
        "Operating System": "Λειτουργικό σύστημα",
        "Installation Type": "Τύπος εγκατάστασης",
        "Full desktop with applications": "Πλήρης επιφάνεια εργασίας με εφαρμογές",
        "Estimated Time": "Εκτιμώμενη διάρκεια",
        "15-30 minutes": "15-30 λεπτά",
        "Click Next to begin configuration.": "Κλικ στο Επόμενο για να ξεκινήσει η ρύθμιση.",
        "Language Changed": "Η γλώσσα άλλαξε",
        "The language has been changed. Please restart the installer to see the changes.": "Η γλώσσα άλλαξε. Επανεκκινήστε τον εγκαταστάτη.",
        "Language Selected": "Επιλέχθηκε γλώσσα",
        "The installer will restart to apply the new language.": "Ο εγκαταστάτης θα επανεκκινηθεί για να εφαρμοστεί η νέα γλώσσα.",
    }),
    "ca_ES": ("Catalan", {
        "Welcome to {}": "Benvingut a {}",
        "Set up your new operating system in a few simple steps.": "Configureu el nou sistema operatiu en uns passos simples.",
        "Language": "Idioma",
        "Installer Language": "Idioma de l'instal·lador",
        "Installation Overview": "Resum de la instal·lació",
        "Operating System": "Sistema operatiu",
        "Installation Type": "Tipus d'instal·lació",
        "Full desktop with applications": "Escriptori complet amb aplicacions",
        "Estimated Time": "Temps estimat",
        "15-30 minutes": "15-30 minuts",
        "Click Next to begin configuration.": "Feu clic a Següent per començar la configuració.",
        "Language Changed": "Idioma canviat",
        "The language has been changed. Please restart the installer to see the changes.": "L'idioma s'ha canviat. Reinicieu l'instal·lador.",
        "Language Selected": "Idioma seleccionat",
        "The installer will restart to apply the new language.": "L'instal·lador es reiniciarà per aplicar la nova llengua.",
    }),
    "gl_ES": ("Galician", {
        "Welcome to {}": "Benvido a {}",
        "Set up your new operating system in a few simple steps.": "Configure o seu novo sistema operativo en poucos pasos.",
        "Language": "Idioma",
        "Installer Language": "Idioma do instalador",
        "Installation Overview": "Resumo da instalación",
        "Operating System": "Sistema operativo",
        "Installation Type": "Tipo de instalación",
        "Full desktop with applications": "Escritorio completo con aplicacións",
        "Estimated Time": "Tempo estimado",
        "15-30 minutes": "15-30 minutos",
        "Click Next to begin configuration.": "Prema en Seguinte para comezar a configuración.",
        "Language Changed": "Idioma cambiado",
        "The language has been changed. Please restart the installer to see the changes.": "O idioma foi cambiado. Reinicie o instalador.",
        "Language Selected": "Idioma seleccionado",
        "The installer will restart to apply the new language.": "O instalador reiniciarase para aplicar o novo idioma.",
    }),
    "eu_ES": ("Basque", {
        "Welcome to {}": "Ongi etorri {}",
        "Set up your new operating system in a few simple steps.": "Konfiguratu zure sistema eragile berria urrats sinple batzuetan.",
        "Language": "Hizkuntza",
        "Installer Language": "Instalatzaileren hizkuntza",
        "Installation Overview": "Instalazioaren ikuspegi orokorra",
        "Operating System": "Sistema eragilea",
        "Installation Type": "Instalazio mota",
        "Full desktop with applications": "Mahaigain osoa aplikazioekin",
        "Estimated Time": "Denbora gutxi gorabehera",
        "15-30 minutes": "15-30 minutu",
        "Click Next to begin configuration.": "Egin klik Hurrengoa konfigurazioa hasteko.",
        "Language Changed": "Hizkuntza aldatu da",
        "The language has been changed. Please restart the installer to see the changes.": "Hizkuntza aldatu da. Berrabiarazi instalatzailea.",
        "Language Selected": "Hizkuntza hautatuta",
        "The installer will restart to apply the new language.": "Instalatzailea berrabiaraziko da hizkuntza berria aplikatzeko.",
    }),
    "ga_IE": ("Irish", {
        "Welcome to {}": "Fáilte go {}",
        "Set up your new operating system in a few simple steps.": "Socraigh do chóras oibriúcháin nua i gcéad céimeanna simplí.",
        "Language": "Teanga",
        "Installer Language": "Teanga an suiteálaí",
        "Installation Overview": "Forléargas ar an suiteáil",
        "Operating System": "Córas oibriúcháin",
        "Installation Type": "Cineál suiteála",
        "Full desktop with applications": "Deasc iomlán le feidhmchláir",
        "Estimated Time": "Am measta",
        "15-30 minutes": "15-30 nóiméad",
        "Click Next to begin configuration.": "Cliceáil Ar Aghaidh chun an chumraíocht a thosú.",
        "Language Changed": "Teanga athraithe",
        "The language has been changed. Please restart the installer to see the changes.": "Tá an teanga athraithe. Atosaigh an suiteálaí.",
        "Language Selected": "Teanga roghnaithe",
        "The installer will restart to apply the new language.": "Atosóidh an suiteálaí chun an teanga nua a chur i bhfeidhm.",
    }),
    "cy_GB": ("Welsh", {
        "Welcome to {}": "Croeso i {}",
        "Set up your new operating system in a few simple steps.": "Ffurfweddu eich system weithredu newydd mewn ychydig gamau syml.",
        "Language": "Iaith",
        "Installer Language": "Iaith y gosodwr",
        "Installation Overview": "Trosolwg gosod",
        "Operating System": "System weithredu",
        "Installation Type": "Math o osod",
        "Full desktop with applications": "Penbwrdd llawn gyda cheisiadau",
        "Estimated Time": "Amcangyfrif o amser",
        "15-30 minutes": "15-30 munud",
        "Click Next to begin configuration.": "Cliciwch Nesaf i ddechrau'r ffurfweddiad.",
        "Language Changed": "Iaith wedi newid",
        "The language has been changed. Please restart the installer to see the changes.": "Mae'r iaith wedi newid. Ailgychwynnwch y gosodwr.",
        "Language Selected": "Iaith wedi'i dewis",
        "The installer will restart to apply the new language.": "Bydd y gosodwr yn ailgychwyn i weithredu'r iaith newydd.",
    }),
}


def write_po(locale_code: str, lang_name: str, msgs: dict) -> None:
    out_dir = LOCALE_DIR / locale_code / "LC_MESSAGES"
    out_dir.mkdir(parents=True, exist_ok=True)
    po_path = out_dir / "centrio.po"
    plural_forms = "nplurals=2; plural=(n != 1);" if locale_code not in ("zh_CN", "zh_TW", "ja_JP", "ko_KR", "th_TH", "ar_SA", "hi_IN") else "nplurals=1; plural=0;"
    lines = [
        'msgid ""',
        'msgstr ""',
        '"Project-Id-Version: Centrio Installer\\n"',
        '"Report-Msgid-Bugs-To: \\n"',
        '"POT-Creation-Date: 2025-08-05 14:30+0000\\n"',
        '"PO-Revision-Date: 2026-02-17+0000\\n"',
        '"Last-Translator: \\n"',
        f'"Language-Team: {lang_name}\\n"',
        f'"Language: {locale_code}\\n"',
        '"MIME-Version: 1.0\\n"',
        '"Content-Type: text/plain; charset=UTF-8\\n"',
        '"Content-Transfer-Encoding: 8bit\\n"',
        f'"Plural-Forms: {plural_forms}\\n"',
        "",
    ]
    for msgid in MSGIDS:
        msgstr = msgs.get(msgid, msgid)
        msgid_esc = msgid.replace("\\", "\\\\").replace('"', '\\"')
        msgstr_esc = msgstr.replace("\\", "\\\\").replace('"', '\\"')
        lines.append(f'msgid "{msgid_esc}"')
        lines.append(f'msgstr "{msgstr_esc}"')
        lines.append("")
    po_path.write_text("\n".join(lines), encoding="utf-8")
    print(f"  Wrote {po_path}")


def compile_mo(locale_code: str) -> bool:
    po_path = LOCALE_DIR / locale_code / "LC_MESSAGES" / "centrio.po"
    mo_path = LOCALE_DIR / locale_code / "LC_MESSAGES" / "centrio.mo"
    if not po_path.exists():
        return False
    r = subprocess.run(
        ["msgfmt", "-o", str(mo_path), str(po_path)],
        capture_output=True,
        text=True,
        timeout=5,
    )
    if r.returncode != 0:
        print(f"  msgfmt failed for {locale_code}: {r.stderr}")
        return False
    print(f"  Compiled {mo_path}")
    return True


def main() -> None:
    os.chdir(REPO_ROOT)
    print("Updating locale .po files and compiling .mo...")
    for code, (lang_name, msgs) in TRANSLATIONS.items():
        write_po(code, lang_name, msgs)
        compile_mo(code)
    print("Done.")


if __name__ == "__main__":
    main()
